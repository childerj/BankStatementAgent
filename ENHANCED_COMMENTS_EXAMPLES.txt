ENHANCED BAI2 COMMENTS - DETAILED CALCULATION EXAMPLES
======================================================

The BAI2 files now include step-by-step reconciliation calculations and clear balance analysis.

================================================================================
EXAMPLE 1: PERFECT RECONCILIATION (✓ BALANCED)
================================================================================
#RECONCILIATION_STATUS: COMPLETE
#OPENING_BALANCE: $1,000.00 (from statement)
#CLOSING_BALANCE: $1,755.25 (from statement)
#TOTAL_DEPOSITS: $800.00 (3 transactions)
#TOTAL_WITHDRAWALS: $44.75
#
#RECONCILIATION_CALCULATION:
#  Starting Balance:    $1,000.00
#  + Total Deposits:    $800.00
#  - Total Withdrawals: $44.75
#  = Calculated Close:  $1,755.25
#  Actual Close:       $1,755.25
#  ✓ BALANCED - No difference

================================================================================
EXAMPLE 2: BALANCE DISCREPANCY ($5.50 DIFFERENCE)
================================================================================
#RECONCILIATION_STATUS: FAILED
#OPENING_BALANCE: $2,500.00 (from statement)
#CLOSING_BALANCE: $3,100.00 (from statement)
#TOTAL_DEPOSITS: $750.00 (2 transactions)
#TOTAL_WITHDRAWALS: $144.50
#
#RECONCILIATION_CALCULATION:
#  Starting Balance:    $2,500.00
#  + Total Deposits:    $750.00
#  - Total Withdrawals: $144.50
#  = Calculated Close:  $3,105.50
#  Actual Close:       $3,100.00
#  Difference:          $-5.50
#    (Actual is $5.50 lower)
#BALANCE_DIFFERENCE: $-5.50
#RECONCILIATION_FAILED: Balance difference exceeds tolerance

================================================================================
EXAMPLE 3: MISSING STARTING BALANCE
================================================================================
#RECONCILIATION_STATUS: ERROR
#OPENING_BALANCE: NOT_FOUND - Missing from bank statement
#CLOSING_BALANCE: $5,432.18 (from statement)
#TOTAL_DEPOSITS: $2,300.00 (4 transactions)
#TOTAL_WITHDRAWALS: $215.25
#
#RECONCILIATION_CALCULATION:
#  Starting Balance:    UNKNOWN
#  + Total Deposits:    $2,300.00
#  - Total Withdrawals: $215.25
#  Actual Close:       $5,432.18
#  Cannot calculate expected close without starting balance

================================================================================
EXAMPLE 4: NO RECONCILIATION DATA
================================================================================
#RECONCILIATION_STATUS: No reconciliation data available
#OPENING_BALANCE: $850.75 (from statement)
#CLOSING_BALANCE: $1,205.25 (from statement)
#TOTAL_DEPOSITS: $400.00 (2 transactions)
#TOTAL_WITHDRAWALS: $45.50

================================================================================
SCENARIO 3: BALANCE MISMATCH (Calculation Error)
================================================================================
#Generated by BankStatementAgent on 2025-08-12 11:58:31
#Source file: test_mismatch.pdf
#Account: 111222333
#RECONCILIATION_STATUS: FAILED
#OPENING_BALANCE: $800.00 (from statement)
#CLOSING_BALANCE: $900.00 (from statement)
#TOTAL_DEPOSITS: $200.00 (2 transactions)
#TOTAL_WITHDRAWALS: $75.00
#EXPECTED_CLOSING: $925.00
#BALANCE_DIFFERENCE: $-25.00
#RECONCILIATION_FAILED: Balance difference exceeds tolerance
#RECONCILIATION_ISSUES:
#  - Balance calculation error: $-25.00
#  - Actual balance is $25.00 lower than expected
#  - May indicate missing transactions or data extraction errors
#ERROR_CODES: BALANCE_MISMATCH
#  BALANCE_MISMATCH: Opening + transactions ≠ closing balance
#WARNINGS:
#  - Balance reconciliation failed: difference of $-25.00
#RECOMMENDATION: Reconciliation failed - review statement and re-process
#  Possible causes: OCR errors, statement format changes, missing data

================================================================================
SCENARIO 4: SUCCESSFUL RECONCILIATION (Perfect Case)
================================================================================
#Generated by BankStatementAgent on 2025-08-12 11:58:31
#Source file: test_successful.pdf
#Account: 123456789
#RECONCILIATION_STATUS: COMPLETE
#OPENING_BALANCE: $1,000.00 (from statement)
#CLOSING_BALANCE: $1,050.00 (from statement)
#TOTAL_DEPOSITS: $100.00 (2 transactions)
#TOTAL_WITHDRAWALS: $50.00
#EXPECTED_CLOSING: $1,050.00
#RECOMMENDATION: Reconciliation successful - BAI2 data is accurate

================================================================================
SCENARIO 5: ERROR FILE (Cannot Process)
================================================================================
#ERROR_FILE_GENERATED: 2025-08-12 11:58:31
#SOURCE_FILE: error_test.pdf
#PRIMARY_ERROR: No account number found on statement
#FILE_STATUS: PROCESSING_FAILED
#ERROR_TYPE: ACCOUNT_NUMBER_EXTRACTION_FAILED
#ISSUE_DESCRIPTION: Could not locate account number in statement
#POSSIBLE_CAUSES:
#  - Statement format not recognized by OCR
#  - Account number in unexpected format or location
#  - OCR text quality too poor for extraction
#  - Statement may be corrupted or non-standard format
#RECOMMENDATION: Manual review of source document required
#NEXT_STEPS:
#  1. Verify document is a valid bank statement
#  2. Check account number is clearly visible
#  3. Re-scan with higher quality if needed
#  4. Contact IT support if format is non-standard
#PROCESSING_STATUS: REQUIRES_MANUAL_INTERVENTION
#WORKDAY_IMPORT: DO_NOT_IMPORT - Fix errors first

================================================================================
KEY BENEFITS:
================================================================================
✅ CLEAR PROBLEM IDENTIFICATION
   - Tells you exactly what's missing (opening balance, closing balance, etc.)
   - Shows what was found vs. what was calculated
   - Identifies specific error types

✅ DETAILED DIAGNOSTICS
   - Shows transaction totals and counts
   - Calculates expected vs. actual balances
   - Provides reconciliation math breakdown

✅ ACTIONABLE RECOMMENDATIONS
   - Specific next steps for each error type
   - Troubleshooting guidance
   - Import safety warnings for Workday

✅ PROCESSING TRANSPARENCY
   - Timestamps when file was processed
   - Source file tracking
   - Processing status and results

✅ USER-FRIENDLY EXPLANATIONS
   - Plain English error descriptions
   - Context for why errors occurred
   - Guidance on prevention and resolution
